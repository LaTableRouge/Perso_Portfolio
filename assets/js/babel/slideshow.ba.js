function _createForOfIteratorHelper(t,e){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=_unsupportedIterableToArray(t))||e&&t&&"number"==typeof t.length){i&&(t=i);function n(){}var s=0;return{s:n,n:function(){return s>=t.length?{done:!0}:{done:!1,value:t[s++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,r=!0,a=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return r=t.done,t},e:function(t){a=!0,o=t},f:function(){try{r||null==i.return||i.return()}finally{if(a)throw o}}}}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}var winsize,getMousePos=function(t){var e=0,i=0;return(t=t||window.event).pageX||t.pageY?(e=t.pageX,i=t.pageY):(t.clientX||t.clientY)&&(e=t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,i=t.clientY+document.body.scrollTop+document.documentElement.scrollTop),{x:e,y:i}},getRandomInt=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},lineEq=function(t,e,i,n,s){var o=(t-e)/(i-n);return o*s+(e-o*n)},chars=["$","%","#","&","=","*","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z",".",":",",","^"],charsTotal=chars.length,randomizeLetters=function(e){return new Promise(function(n,t){var s=e.length,o=0;e.forEach(function(e,t){var i;!function t(){e.innerHTML=chars[getRandomInt(0,charsTotal-1)],i=setTimeout(t,getRandomInt(50,500))}();setTimeout(function(){clearTimeout(i),e.style.opacity=1,e.innerHTML=e.dataset.initial,++o===s&&n()},t*lineEq(40,0,8,200,s))})})},disassembleLetters=function(e){return new Promise(function(i,t){var n=e.length,s=0;e.forEach(function(t,e){setTimeout(function(){t.style.opacity=0,++s===n&&i()},30*e)})})},Slide=function(){function e(t){_classCallCheck(this,e),this.DOM={el:t},this.DOM.imgWrap=this.DOM.el.querySelector(".slide__img-wrap"),this.DOM.img=this.DOM.imgWrap.querySelector(".slide__img"),this.DOM.texts={wrap:this.DOM.el.querySelector(".slide__title-wrap"),title:this.DOM.el.querySelector(".slide__title"),number:this.DOM.el.querySelector(".slide__number"),side:this.DOM.el.querySelector(".slide__side")},charming(this.DOM.texts.title),charming(this.DOM.texts.side),this.DOM.titleLetters=Array.from(this.DOM.texts.title.querySelectorAll("span")).sort(function(){return.5-Math.random()}),this.DOM.sideLetters=Array.from(this.DOM.texts.side.querySelectorAll("span")).sort(function(){return.5-Math.random()}),this.DOM.titleLetters.forEach(function(t){return t.dataset.initial=t.innerHTML}),this.DOM.sideLetters.forEach(function(t){return t.dataset.initial=t.innerHTML}),this.calcSizes(),this.calcTransforms(),this.initEvents()}return _createClass(e,[{key:"calcSizes",value:function(){this.width=this.DOM.imgWrap.offsetWidth,this.height=this.DOM.imgWrap.offsetHeight}},{key:"calcTransforms",value:function(){this.transforms=[{x:-1*(winsize.width/2+this.width),y:-1*(winsize.height/2+this.height),rotation:-30},{x:-1*(winsize.width/2-this.width/3),y:-1*(winsize.height/2-this.height/3),rotation:0},{x:0,y:0,rotation:0},{x:winsize.width/2-this.width/3,y:winsize.height/2-this.height/3,rotation:0},{x:winsize.width/2+this.width,y:winsize.height/2+this.height,rotation:30},{x:-1*(winsize.width/2-this.width/2-.075*winsize.width),y:0,rotation:0}]}},{key:"initEvents",value:function(){var e=this;this.mouseenterFn=function(){e.isPositionedCenter()&&allowTilt&&(clearTimeout(e.mousetime),e.mousetime=setTimeout(function(){TweenMax.to(e.DOM.img,.8,{ease:Power3.easeOut,scale:1.1})},40))},this.mousemoveFn=function(t){return requestAnimationFrame(function(){allowTilt&&e.isPositionedCenter()&&e.tilt(t)})},this.mouseleaveFn=function(t){return requestAnimationFrame(function(){allowTilt&&e.isPositionedCenter()&&(clearTimeout(e.mousetime),TweenMax.to([e.DOM.imgWrap,e.DOM.texts.wrap],1.8,{ease:"Power4.easeOut",x:0,y:0,rotationX:0,rotationY:0}),TweenMax.to(e.DOM.img,1.8,{ease:"Power4.easeOut",scale:1}))})},this.resizeFn=function(){e.calcSizes(),e.calcTransforms()},this.DOM.imgWrap.addEventListener("mouseenter",this.mouseenterFn),this.DOM.imgWrap.addEventListener("mousemove",this.mousemoveFn),this.DOM.imgWrap.addEventListener("mouseleave",this.mouseleaveFn),window.addEventListener("resize",this.resizeFn)}},{key:"tilt",value:function(t){var e=getMousePos(t),i=document.body.scrollLeft+document.documentElement.scrollLeft,n=document.body.scrollTop+document.documentElement.scrollTop,s=this.DOM.imgWrap.getBoundingClientRect(),o=e.x-s.left-i,r=e.y-s.top-n,a=[-20,20],l=[-20,20],h=[-15,15],c=[-15,15],u={translation:{x:(a[1]-a[0])/s.width*o+a[0],y:(l[1]-l[0])/s.height*r+l[0]},rotation:{x:(h[1]-h[0])/s.height*r+h[0],y:(c[1]-c[0])/s.width*o+c[0]}};TweenMax.to(this.DOM.imgWrap,1.5,{ease:"Power1.easeOut",x:u.translation.x,y:u.translation.y,rotationX:u.rotation.x,rotationY:u.rotation.y}),TweenMax.to(this.DOM.texts.wrap,1.5,{ease:"Power1.easeOut",x:-1*u.translation.x,y:-1*u.translation.y})}},{key:"position",value:function(t){TweenMax.set(this.DOM.imgWrap,{x:this.transforms[t].x,y:this.transforms[t].y,rotationX:0,rotationY:0,opacity:1,rotationZ:this.transforms[t].rotation})}},{key:"setCurrent",value:function(t){this.isCurrent=!0,this.DOM.el.classList.add("slide--current","slide--visible"),this.position(t?5:2)}},{key:"setLeft",value:function(t){this.isRight=this.isCurrent=!1,this.isLeft=!0,this.DOM.el.classList.add("slide--visible"),this.position(t?0:1)}},{key:"setRight",value:function(t){this.isLeft=this.isCurrent=!1,this.isRight=!0,this.DOM.el.classList.add("slide--visible"),this.position(t?4:3)}},{key:"isPositionedRight",value:function(){return this.isRight}},{key:"isPositionedLeft",value:function(){return this.isLeft}},{key:"isPositionedCenter",value:function(){return this.isCurrent}},{key:"reset",value:function(){this.isRight=this.isLeft=this.isCurrent=!1,this.DOM.el.classList="slide"}},{key:"hide",value:function(){TweenMax.set(this.DOM.imgWrap,{x:0,y:0,rotationX:0,rotationY:0,rotationZ:0,opacity:0})}},{key:"moveToPosition",value:function(i){var n=this;return new Promise(function(t,e){TweenMax.to(n.DOM.imgWrap,.8,{ease:Power4.easeInOut,delay:i.delay||0,startAt:void 0!==i.from?{x:n.transforms[i.from+2].x,y:n.transforms[i.from+2].y,rotationX:0,rotationY:0,rotationZ:n.transforms[i.from+2].rotation}:{},x:n.transforms[i.position+2].x,y:n.transforms[i.position+2].y,rotationX:0,rotationY:0,rotationZ:n.transforms[i.position+2].rotation,onStart:void 0!==i.from?function(){return TweenMax.set(n.DOM.imgWrap,{opacity:1})}:null,onComplete:t}),i.resetImageScale&&TweenMax.to(n.DOM.img,.8,{ease:Power4.easeInOut,scale:1})})}},{key:"hideTexts",value:function(t){var e=this;0<arguments.length&&void 0!==t&&t?(disassembleLetters(this.DOM.titleLetters).then(function(){return TweenMax.set(e.DOM.texts.wrap,{opacity:0})}),disassembleLetters(this.DOM.sideLetters).then(function(){return TweenMax.set(e.DOM.texts.side,{opacity:0})})):(TweenMax.set(this.DOM.texts.wrap,{opacity:0}),TweenMax.set(this.DOM.texts.side,{opacity:0}))}},{key:"showTexts",value:function(t){var e=!(0<arguments.length&&void 0!==t)||t;TweenMax.set(this.DOM.texts.wrap,{opacity:1}),TweenMax.set(this.DOM.texts.side,{opacity:1}),e&&(randomizeLetters(this.DOM.titleLetters),randomizeLetters(this.DOM.sideLetters),TweenMax.to(this.DOM.texts.number,.6,{ease:Elastic.easeOut.config(1,.5),startAt:{x:"-10%",opacity:0},x:"0%",opacity:1}))}}]),e}(),Content=function(){function e(t){_classCallCheck(this,e),this.DOM={el:t},this.DOM.number=this.DOM.el.querySelector(".content__number"),this.DOM.link=this.DOM.el.querySelector(".content__link"),this.DOM.date=this.DOM.el.querySelector(".content__date"),this.DOM.title=this.DOM.el.querySelector(".content__title"),this.DOM.subtitle=this.DOM.el.querySelector(".content__subtitle"),this.DOM.text=this.DOM.el.querySelector(".content__text"),this.DOM.backCtrl=this.DOM.el.parentNode.querySelector(".content__close"),this.DOM.backCtrl.addEventListener("click",function(){return slideshow.hideContent()})}return _createClass(e,[{key:"show",value:function(){this.DOM.el.classList.add("content__item--current"),TweenMax.staggerTo([this.DOM.backCtrl,this.DOM.number,this.DOM.link,this.DOM.date,this.DOM.title,this.DOM.subtitle,this.DOM.text],.8,{ease:Power4.easeOut,delay:.4,opacity:1,startAt:{y:40},y:0},.05)}},{key:"hide",value:function(){this.DOM.el.classList.remove("content__item--current"),TweenMax.staggerTo([this.DOM.backCtrl,this.DOM.number,this.DOM.link,this.DOM.date,this.DOM.title,this.DOM.subtitle,this.DOM.text].reverse(),.3,{ease:Power3.easeIn,opacity:0,y:10},.01)}}]),e}(),Slideshow=function(){function i(t){var e=this;if(_classCallCheck(this,i),this.DOM={el:t},this.slides=[],Array.from(this.DOM.el.querySelectorAll(".slide")).forEach(function(t){return e.slides.push(new Slide(t))}),this.slidesTotal=this.slides.length,this.slidesTotal<4)return!1;this.current=0,this.DOM.deco=this.DOM.el.querySelector(".slideshow__deco"),this.contents=[],Array.from(document.querySelectorAll(".content > .content__item")).forEach(function(t){return e.contents.push(new Content(t))}),this.render(),this.currentSlide.showTexts(!1),this.initEvents()}return _createClass(i,[{key:"render",value:function(){this.currentSlide=this.slides[this.current],this.nextSlide=this.slides[this.current+1<=this.slidesTotal-1?this.current+1:0],this.prevSlide=this.slides[0<=this.current-1?this.current-1:this.slidesTotal-1],this.currentSlide.setCurrent(),this.nextSlide.setRight(),this.prevSlide.setLeft()}},{key:"initEvents",value:function(){var e=this;this.clickFn=function(t){t.isPositionedRight()?e.navigate("next"):t.isPositionedLeft()?e.navigate("prev"):e.showContent()};var i,n=_createForOfIteratorHelper(this.slides);try{for(n.s();!(i=n.n()).done;)!function(){var t=i.value;t.DOM.imgWrap.addEventListener("click",function(){return e.clickFn(t)})}()}catch(t){n.e(t)}finally{n.f()}this.resizeFn=function(){e.nextSlide.setRight(e.isContentOpen),e.prevSlide.setLeft(e.isContentOpen),e.currentSlide.setCurrent(e.isContentOpen),e.isContentOpen&&TweenMax.set(e.DOM.deco,{scaleX:winsize.width/e.DOM.deco.offsetWidth,scaleY:winsize.height/e.DOM.deco.offsetHeight,x:-20,y:20})},window.addEventListener("resize",this.resizeFn)}},{key:"showContent",value:function(){this.isContentOpen||this.isAnimating||(allowTilt=!1,this.isContentOpen=!0,this.DOM.el.classList.add("slideshow--previewopen"),TweenMax.to(this.DOM.deco,.8,{ease:Power4.easeInOut,scaleX:winsize.width/this.DOM.deco.offsetWidth,scaleY:winsize.height/this.DOM.deco.offsetHeight,x:-20,y:20}),this.prevSlide.moveToPosition({position:-2}),this.nextSlide.moveToPosition({position:2}),this.currentSlide.moveToPosition({position:3,resetImageScale:!0}),this.contents[this.current].show(),this.currentSlide.hideTexts(!0))}},{key:"hideContent",value:function(){var t=this;this.isContentOpen&&!this.isAnimating&&(this.DOM.el.classList.remove("slideshow--previewopen"),this.contents[this.current].hide(),TweenMax.to(this.DOM.deco,.8,{ease:Power4.easeInOut,scaleX:1,scaleY:1,x:0,y:0}),this.prevSlide.moveToPosition({position:-1}),this.nextSlide.moveToPosition({position:1}),this.currentSlide.moveToPosition({position:0}).then(function(){allowTilt=!0,t.isContentOpen=!1}),this.currentSlide.showTexts())}},{key:"bounceDeco",value:function(t,e){var i=this;TweenMax.to(this.DOM.deco,.4,{ease:"Power2.easeIn",delay:e+.2*e,x:"next"===t?-40:40,y:"next"===t?-40:40,onComplete:function(){TweenMax.to(i.DOM.deco,.6,{ease:"Power2.easeOut",x:0,y:0})}})}},{key:"navigate",value:function(t){var e,i=this;this.isAnimating||(this.isAnimating=!0,allowTilt=!1,e="next"===t?this.current<this.slidesTotal-2?this.current+2:Math.abs(this.slidesTotal-2-this.current):2<=this.current?this.current-2:Math.abs(this.slidesTotal-2+this.current),this.upcomingSlide=this.slides[e],this.current="next"===t?this.current<this.slidesTotal-1?this.current+1:0:0<this.current?this.current-1:this.slidesTotal-1,this.prevSlide.moveToPosition({position:"next"===t?-2:0,delay:"next"===t?0:.14}).then(function(){"next"===t&&i.prevSlide.hide()}),this.currentSlide.moveToPosition({position:"next"===t?-1:1,delay:.07}),this.currentSlide.hideTexts(),this.bounceDeco(t,.07),this.nextSlide.moveToPosition({position:"next"===t?0:2,delay:"next"===t?.14:0}).then(function(){"prev"===t&&i.nextSlide.hide()}),"next"===t?this.nextSlide.showTexts():this.prevSlide.showTexts(),this.upcomingSlide.moveToPosition({position:"next"===t?1:-1,from:"next"===t?2:-2,delay:.21}).then(function(){[i.nextSlide,i.currentSlide,i.prevSlide].forEach(function(t){return t.reset()}),i.render(),allowTilt=!0,i.isAnimating=!1}))}}]),i}(),calcWinsize=function(){return winsize={width:window.innerWidth,height:window.innerHeight}};calcWinsize(),window.addEventListener("resize",calcWinsize);var allowTilt=!0,slideshow=new Slideshow(document.querySelector(".slideshow")),loader=document.querySelector(".loader");imagesLoaded(document.querySelectorAll(".slide__img"),{background:!0},function(){return document.body.classList.remove("loading")});